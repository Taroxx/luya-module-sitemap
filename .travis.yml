language: php

php:
  - '5.4'
  - '5.5'
  - '5.6'
  - '7.1'
  - '7.2'
  - '7.3'
  - nightly

matrix:
  # allow php nightly to fail until https://travis-ci.community/t/php-nightly-now-requires-oniguruma/2237 is fixed
  allow_failures:
    - php: nightly

install: if [[ $TRAVIS_PHP_VERSION = "5.4" || $TRAVIS_PHP_VERSION = "5.5" || $TRAVIS_PHP_VERSION = "5.6" || $TRAVIS_PHP_VERSION = "7.3" ]]; then composer remove friendsofphp/php-cs-fixer --no-update ; composer update ; else make install; fi
script:
  - make test
  - if [[ $TRAVIS_PHP_VERSION = "7.2" ]]; then make check-style; fi
